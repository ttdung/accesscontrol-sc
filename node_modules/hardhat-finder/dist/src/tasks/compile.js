"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const task_names_1 = require("hardhat/builtin-tasks/task-names");
const config_1 = require("hardhat/config");
const constants_1 = require("../constants");
const compileAction = async (taskArgs, { run, config }, runSuper) => {
    await runSuper(taskArgs);
    if (!taskArgs.noFinder && config.finder.runOnCompile) {
        const finderTaskArguments = {
            depth: config.finder.depth === Infinity ? undefined : config.finder.depth,
            maxStringLength: config.finder.maxStringLength === Infinity
                ? undefined
                : config.finder.maxStringLength,
            noCompile: true,
        };
        await run(constants_1.TASK_FINDER, finderTaskArguments);
    }
};
(0, config_1.task)(task_names_1.TASK_COMPILE)
    .addFlag("noFinder", "Don't run Finder after running this task, even if finder.runOnCompile option is true")
    .setAction(compileAction);
//# sourceMappingURL=compile.js.map